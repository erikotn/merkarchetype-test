<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dizain Merkarchetype Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState } = React;

        function PieChart({ data }) {
            const total = data.reduce((sum, item) => sum + item.value, 0);
            let currentAngle = -90; // Start from top

            const slices = data.map((item, index) => {
                const percentage = (item.value / total) * 100;
                const angle = (percentage / 100) * 360;
                const startAngle = currentAngle;
                const endAngle = currentAngle + angle;
                
                const startRad = (startAngle * Math.PI) / 180;
                const endRad = (endAngle * Math.PI) / 180;
                
                const x1 = 150 + 120 * Math.cos(startRad);
                const y1 = 150 + 120 * Math.sin(startRad);
                const x2 = 150 + 120 * Math.cos(endRad);
                const y2 = 150 + 120 * Math.sin(endRad);
                
                const largeArc = angle > 180 ? 1 : 0;
                
                const pathData = [
                    `M 150 150`,
                    `L ${x1} ${y1}`,
                    `A 120 120 0 ${largeArc} 1 ${x2} ${y2}`,
                    `Z`
                ].join(' ');
                
                currentAngle = endAngle;
                
                return (
                    <path
                        key={index}
                        d={pathData}
                        fill={item.color}
                        stroke="white"
                        strokeWidth="2"
                    />
                );
            });

            return (
                <svg viewBox="0 0 300 300" className="w-full max-w-sm mx-auto">
                    {slices}
                </svg>
            );
        }

        const archetypes = {
            innocent: {
                name: "De Onschuldige",
                subtitle: "puur, optimistisch, eenvoudig",
                description: "De Onschuldige staat voor puurheid, optimisme en eenvoud. Dit archetype gelooft in het goede en wil zowel zichzelf als anderen gelukkig maken. Het is een betrouwbaar, eerlijk en nostalgisch merk dat veiligheid en positiviteit uitstraalt.",
                promise: "Het komt allemaal goed.",
                communication: "De Onschuldige communiceert op een eenvoudige, heldere en positieve manier. De toon is optimistisch en geruststellend, zonder cynisme of complexiteit. Beeldgebruik is clean, licht en vaak nostalgisch. Boodschappen zijn rechtdoorzee en bieden troost en zekerheid.",
                traits: "Positiviteit, vertrouwen, eenvoud, nostalgie",
                brands: "Campina, Friesche Vlag, Verkade, Dove, Coca-Cola",
                color: "#81c784"
            },
            explorer: {
                name: "De Ontdekker",
                subtitle: "vrijheid, avontuur, ontdekking",
                description: "De Ontdekker staat voor vrijheid, avontuur en ontdekking. Dit archetype wil grenzen verleggen, nieuwe ervaringen opdoen en authentiek zijn. Het is onafhankelijk, moedig en pionierend, altijd op zoek naar wat er verder nog te ontdekken valt.",
                promise: "Ontdek jezelf en de wereld.",
                communication: "De Ontdekker communiceert inspirerend en bevrijdend. De toon is avontuurlijk en nodigt uit tot actie. Beelden tonen wijde landschappen, reizen en grenzeloosheid. De boodschap gaat over zelfontdekking, individualiteit en het verleggen van grenzen.",
                traits: "Avontuur, autonomie, authenticiteit, ontdekking",
                brands: "KLM, ANWB, Staatsloterij, The North Face, Jeep",
                color: "#aed581"
            },
            sage: {
                name: "De Wijze",
                subtitle: "kennis, expertise, betrouwbaarheid",
                description: "De Wijze staat voor kennis, waarheid en intelligentie. Dit archetype streeft ernaar de wereld te begrijpen en die kennis te delen met anderen. Het is een expert, een betrouwbare bron van informatie die analytisch en doordacht te werk gaat.",
                promise: "De waarheid zal je vrijmaken.",
                communication: "De Wijze communiceert helder, informatief en onderbouwd. De toon is educatief en gezaghebbend, maar niet betuttelend. Feiten, onderzoek en expertise staan centraal. Dit merk positioneert zich als thought leader en betrouwbare kennisbron.",
                traits: "Wijsheid, expertise, analyse, waarheid",
                brands: "NOS, NU.nl, Douwe Egberts, BBC, Google",
                color: "#4caf50"
            },
            hero: {
                name: "De Held",
                subtitle: "moed, prestatie, overwinning",
                description: "De Held staat voor moed, prestatie en overwinning. Dit archetype wil impact maken en uitdagingen overwinnen. Het is dapper, sterk en gedreven naar uitmuntendheid.",
                promise: "Waar een wil is, is een weg.",
                communication: "De Held communiceert motiverend, krachtig en doelgericht. De toon is inspirerend en roept op tot actie en prestatie. Beelden tonen overwinning, doorzettingsvermogen en succes. Dit merk daagt mensen uit het beste uit zichzelf te halen.",
                traits: "Moed, doorzettingsvermogen, prestatie, kracht",
                brands: "Jumbo, Rabobank, Heineken, Nike, Adidas, FedEx",
                color: "#e57373"
            },
            outlaw: {
                name: "De Rebel",
                subtitle: "regelbreker, anders, disruptief",
                description: "De Rebel staat voor rebellie, bevrijding en revolutie. Dit archetype daagt de status quo uit en durft te provoceren. Het is radicaal, disruptief en authentiek rebels.",
                promise: "De regels zijn er om gebroken te worden.",
                communication: "De Rebel communiceert provocerend, direct en zonder compromissen. De toon is rebels en uitdagend, soms zelfs confronterend. Beeldgebruik is ruig, edgy en onconventioneel. Dit merk spreekt taboes aan en kiest bewust positie.",
                traits: "Rebellie, bevrijding, revolutie, provocatie",
                brands: "G-Star RAW, Tony's Chocolonely, Transavia, Harley-Davidson, Virgin",
                color: "#ffb74d"
            },
            magician: {
                name: "De Magiër",
                subtitle: "transformatie, visie, wonder",
                description: "De Magiër staat voor transformatie, visie en het waar maken van dromen. Dit archetype inspireert door ogenschijnlijk onmogelijke dingen mogelijk te maken. Het is charismatisch, visionair en transformerend.",
                promise: "Alles is mogelijk.",
                communication: "De Magiër communiceert mysterieus, inspirerend en visionair. De toon is magisch en belooft transformatie. Beelden zijn vaak sprookjesachtig, verbeeldingsvol of toekomstgericht. De communicatie gaat over dromen die werkelijkheid worden.",
                traits: "Transformatie, visie, inspiratie, innovatie",
                brands: "Efteling, Philips, Disney, Tesla",
                color: "#ff9800"
            },
            regular: {
                name: "De Bondgenoot",
                subtitle: "erbij horen, toegankelijk, realisme",
                description: "De Bondgenoot staat voor verbinding, eerlijkheid en toegankelijkheid. Dit archetype wil erbij horen en echte connectie maken met anderen. Het is betrouwbaar, down-to-earth en herkenbaar.",
                promise: "Wij begrijpen je.",
                communication: "De Bondgenoot communiceert toegankelijk, herkenbaar en zonder poespas. De toon is vriendelijk, eerlijk en praktisch. Beelden tonen gewone mensen in alledaagse situaties. Dit merk spreekt de taal van de doelgroep en toont begrip voor hun uitdagingen.",
                traits: "Toegankelijkheid, eerlijkheid, realisme, verbinding",
                brands: "Albert Heijn, HEMA, Gamma, Kruidvat, IKEA, eBay",
                color: "#9575cd"
            },
            lover: {
                name: "De Verleider",
                subtitle: "intimiteit, plezier, sensualiteit",
                description: "De Verleider staat voor passie, intimiteit en schoonheid. Dit archetype streeft naar nabijheid, genot en betekenisvolle ervaringen. Het is sensueel, warm en gepassioneerd.",
                promise: "Geniet van het moment.",
                communication: "De Verleider communiceert sensueel, emotioneel en intiem. De toon is warm, verleidelijk en persoonlijk. Beelden zijn esthetisch, romantisch en appelleren aan de zintuigen. De communicatie gaat over genieten, verwennen en het ervaren van schoonheid.",
                traits: "Passie, intimiteit, schoonheid, sensualiteit",
                brands: "Rituals, De Bijenkorf, Spa, Chanel, Godiva",
                color: "#f06292"
            },
            jester: {
                name: "De Joker",
                subtitle: "plezier, humor, luchtigheid",
                description: "De Joker staat voor plezier, humor en luchtigheid. Dit archetype wil het leven vieren en anderen aan het lachen maken. Het is speels, optimistisch en spontaan.",
                promise: "Het leven is een feest.",
                communication: "De Joker communiceert humoristisch, energiek en ongedwongen. De toon is lichtvoetig, grappig en entertainend. Beelden zijn kleurrijk, speels en onverwacht. De communicatie durft gek te doen en neemt zichzelf niet te serieus.",
                traits: "Humor, plezier, spontaniteit, luchtigheid",
                brands: "Coolblue, Ben, bol.com, Old Spice, M&M's",
                color: "#ba68c8"
            },
            caregiver: {
                name: "De Beschermer",
                subtitle: "zorg, bescherming, medeleven",
                description: "De Beschermer staat voor zorg, bescherming en compassie. Dit archetype wil anderen helpen en beschermen. Het is warm, ondersteunend en altruïstisch.",
                promise: "Ik zorg voor je.",
                communication: "De Beschermer communiceert empathisch, geruststellend en ondersteunend. De toon is zorgzaam, warm en betrokken. Beelden tonen zorg, bescherming en menselijke verbinding. Dit merk stelt zich dienstbaar op en spreekt over verantwoordelijkheid en toewijding.",
                traits: "Zorg, bescherming, generositeit, empathie",
                brands: "Zilveren Kruis, CZ, Rode Kruis, VGZ, Volvo, Unicef",
                color: "#7986cb"
            },
            ruler: {
                name: "De Leider",
                subtitle: "controle, leiderschap, status",
                description: "De Leider staat voor controle, leiderschap en succes. Dit archetype streeft naar het creëren van welvaart en stabiliteit. Het is dominant, georganiseerd en exclusief.",
                promise: "Macht creëert mogelijkheden.",
                communication: "De Leider communiceert zelfverzekerd, autoritair en prestigieus. De toon is formeel, krachtig en gebiedend. Beelden tonen luxe, succes en exclusiviteit. Dit merk positioneert zich als marktleider en statusmerk.",
                traits: "Leiderschap, controle, status, stabiliteit",
                brands: "ABN AMRO, ING, Nationale Nederlanden, Mercedes-Benz, Rolex",
                color: "#64b5f6"
            },
            creator: {
                name: "De Creator",
                subtitle: "innovatie, creativiteit, verbeelding",
                description: "De Creator staat voor creativiteit, innovatie en verbeelding. Dit archetype wil iets waardevols en blijvends creëren. Het is creatief, innovatief en authentiek non-conform.",
                promise: "Als je het kunt bedenken, kun je het maken.",
                communication: "De Creator communiceert inspirerend, origineel en kunstzinnig. De toon is creatief, innovatief en soms onconventioneel. Beelden zijn vaak artistiek, vernieuwend of design-gedreven. Dit merk moedigt aan om dingen te maken en jezelf uit te drukken.",
                traits: "Creativiteit, innovatie, verbeelding, expressie",
                brands: "ASML, Coolblue, Apple, Lego, Adobe",
                color: "#4dd0e1"
            }
        };

        const questions = [
            {
                id: 1,
                left: "We zijn speels en spontaan",
                right: "We zijn serieus en verantwoordelijk",
                archetypeMapping: {
                    1: { jester: 2, explorer: 1 },
                    2: { jester: 1, explorer: 1 },
                    3: {},
                    4: { ruler: 1, caregiver: 1 },
                    5: { ruler: 2, caregiver: 2 }
                }
            },
            {
                id: 2,
                left: "We streven naar vrijheid en avontuur",
                right: "We streven naar veiligheid en zekerheid",
                archetypeMapping: {
                    1: { explorer: 2, outlaw: 1 },
                    2: { explorer: 1, hero: 1 },
                    3: {},
                    4: { innocent: 1, caregiver: 1 },
                    5: { innocent: 2, caregiver: 2 }
                }
            },
            {
                id: 3,
                left: "Onze toon is vriendelijk en zorgzaam",
                right: "Onze toon is sterk en beschermend",
                archetypeMapping: {
                    1: { caregiver: 2, lover: 1 },
                    2: { caregiver: 1, regular: 1 },
                    3: {},
                    4: { hero: 1, ruler: 1 },
                    5: { hero: 2, ruler: 1 }
                }
            },
            {
                id: 4,
                left: "We willen de wereld verbeteren",
                right: "We willen het leven gemakkelijker maken",
                archetypeMapping: {
                    1: { hero: 2, magician: 1, sage: 1 },
                    2: { hero: 1, magician: 1 },
                    3: {},
                    4: { regular: 1, caregiver: 1 },
                    5: { regular: 2, caregiver: 2 }
                }
            },
            {
                id: 5,
                left: "We staan voor authenticiteit en echtheid",
                right: "We staan voor succes en prestige",
                archetypeMapping: {
                    1: { regular: 2, explorer: 1, innocent: 1 },
                    2: { regular: 1, explorer: 1 },
                    3: {},
                    4: { ruler: 1, hero: 1 },
                    5: { ruler: 2, hero: 1 }
                }
            },
            {
                id: 6,
                left: "We inspireren door verbeeldingskracht",
                right: "We inspireren door logica en efficiëntie",
                archetypeMapping: {
                    1: { creator: 2, magician: 2 },
                    2: { creator: 1, magician: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 1 }
                }
            },
            {
                id: 7,
                left: "We zoeken verandering en revolutie",
                right: "We zoeken stabiliteit en continuïteit",
                archetypeMapping: {
                    1: { outlaw: 2, magician: 1, hero: 1 },
                    2: { outlaw: 1, magician: 1 },
                    3: {},
                    4: { innocent: 1, ruler: 1, caregiver: 1 },
                    5: { innocent: 2, ruler: 1, caregiver: 1 }
                }
            },
            {
                id: 8,
                left: "Onze communicatie is warm en menselijk",
                right: "Onze communicatie is cool en professioneel",
                archetypeMapping: {
                    1: { caregiver: 2, lover: 1, regular: 1 },
                    2: { caregiver: 1, regular: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 1 }
                }
            },
            {
                id: 9,
                left: "We richten ons op gemeenschap en verbinding",
                right: "We richten ons op prestatie en status",
                archetypeMapping: {
                    1: { regular: 2, caregiver: 2 },
                    2: { regular: 1, caregiver: 1 },
                    3: {},
                    4: { hero: 1, ruler: 1 },
                    5: { hero: 2, ruler: 2 }
                }
            },
            {
                id: 10,
                left: "We helpen mensen hun potentieel te zien",
                right: "We helpen mensen zich veilig te voelen",
                archetypeMapping: {
                    1: { magician: 2, hero: 1, sage: 1 },
                    2: { magician: 1, sage: 1 },
                    3: {},
                    4: { caregiver: 1, innocent: 1 },
                    5: { caregiver: 2, innocent: 2 }
                }
            },
            {
                id: 11,
                left: "We geloven in dromen en magie",
                right: "We geloven in feiten en realiteit",
                archetypeMapping: {
                    1: { magician: 2, creator: 1, lover: 1 },
                    2: { magician: 1, creator: 1 },
                    3: {},
                    4: { sage: 1, regular: 1 },
                    5: { sage: 2, regular: 2 }
                }
            },
            {
                id: 12,
                left: "We willen dat klanten zich vrij voelen",
                right: "We willen dat klanten zich beschermd weten",
                archetypeMapping: {
                    1: { explorer: 2, outlaw: 1 },
                    2: { explorer: 1, hero: 1 },
                    3: {},
                    4: { caregiver: 1, innocent: 1 },
                    5: { caregiver: 2, innocent: 2 }
                }
            },
            {
                id: 13,
                left: "We spreken als een vriend",
                right: "We spreken als een expert",
                archetypeMapping: {
                    1: { regular: 2, jester: 1 },
                    2: { regular: 1, caregiver: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 1 }
                }
            },
            {
                id: 14,
                left: "We moedigen avontuur en ontdekking aan",
                right: "We moedigen orde en structuur aan",
                archetypeMapping: {
                    1: { explorer: 2, hero: 1 },
                    2: { explorer: 1, creator: 1 },
                    3: {},
                    4: { ruler: 1, innocent: 1 },
                    5: { ruler: 2, sage: 1 }
                }
            },
            {
                id: 15,
                left: "We brengen originaliteit",
                right: "We brengen betrouwbaarheid",
                archetypeMapping: {
                    1: { creator: 2, outlaw: 1, magician: 1 },
                    2: { creator: 1, outlaw: 1 },
                    3: {},
                    4: { regular: 1, innocent: 1, caregiver: 1 },
                    5: { regular: 2, innocent: 2, caregiver: 1 }
                }
            },
            {
                id: 16,
                left: "We streven naar perfectie",
                right: "We streven naar authenticiteit",
                archetypeMapping: {
                    1: { ruler: 2, hero: 1, sage: 1 },
                    2: { ruler: 1, hero: 1 },
                    3: {},
                    4: { regular: 1, explorer: 1 },
                    5: { regular: 2, explorer: 2 }
                }
            },
            {
                id: 17,
                left: "We staan voor discipline en beheersing",
                right: "We staan voor passie en emotie",
                archetypeMapping: {
                    1: { ruler: 2, sage: 1 },
                    2: { ruler: 1, hero: 1 },
                    3: {},
                    4: { lover: 1, outlaw: 1, jester: 1 },
                    5: { lover: 2, outlaw: 1, jester: 1 }
                }
            },
            {
                id: 18,
                left: "We willen anderen inspireren",
                right: "We willen anderen dienen",
                archetypeMapping: {
                    1: { hero: 2, magician: 1, sage: 1 },
                    2: { hero: 1, magician: 1 },
                    3: {},
                    4: { caregiver: 1, regular: 1 },
                    5: { caregiver: 2, regular: 2 }
                }
            },
            {
                id: 19,
                left: "We waarderen speelsheid",
                right: "We waarderen wijsheid",
                archetypeMapping: {
                    1: { jester: 2, innocent: 1 },
                    2: { jester: 1, lover: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 1 }
                }
            },
            {
                id: 20,
                left: "We geloven in rebellie",
                right: "We geloven in traditie",
                archetypeMapping: {
                    1: { outlaw: 2, creator: 1 },
                    2: { outlaw: 1, hero: 1 },
                    3: {},
                    4: { innocent: 1, ruler: 1, caregiver: 1 },
                    5: { innocent: 2, ruler: 1, caregiver: 1 }
                }
            },
            {
                id: 21,
                left: "Onze klanten zien ons als een gids",
                right: "Onze klanten zien ons als een bondgenoot",
                archetypeMapping: {
                    1: { sage: 2, hero: 1, magician: 1 },
                    2: { sage: 1, hero: 1 },
                    3: {},
                    4: { regular: 1, caregiver: 1 },
                    5: { regular: 2, caregiver: 2 }
                }
            },
            {
                id: 22,
                left: "We zijn visionair en idealistisch",
                right: "We zijn praktisch en realistisch",
                archetypeMapping: {
                    1: { magician: 2, hero: 1, creator: 1 },
                    2: { magician: 1, hero: 1 },
                    3: {},
                    4: { regular: 1, sage: 1 },
                    5: { regular: 2, sage: 1 }
                }
            },
            {
                id: 23,
                left: "We streven naar groei en zelfontplooiing",
                right: "We streven naar comfort en voorspelbaarheid",
                archetypeMapping: {
                    1: { explorer: 2, hero: 1, magician: 1 },
                    2: { explorer: 1, hero: 1 },
                    3: {},
                    4: { innocent: 1, caregiver: 1 },
                    5: { innocent: 2, caregiver: 2 }
                }
            },
            {
                id: 24,
                left: "We spreken met humor",
                right: "We spreken met ernst",
                archetypeMapping: {
                    1: { jester: 2, lover: 1 },
                    2: { jester: 1, regular: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1, hero: 1 },
                    5: { sage: 2, ruler: 1, hero: 1 }
                }
            },
            {
                id: 25,
                left: "We positioneren ons als uitdager",
                right: "We positioneren ons als leider",
                archetypeMapping: {
                    1: { outlaw: 2, hero: 1 },
                    2: { outlaw: 1, hero: 1 },
                    3: {},
                    4: { ruler: 1, sage: 1 },
                    5: { ruler: 2, sage: 1 }
                }
            },
            {
                id: 26,
                left: "We draaien om emotie",
                right: "We draaien om ratio",
                archetypeMapping: {
                    1: { lover: 2, jester: 1, caregiver: 1 },
                    2: { lover: 1, caregiver: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 2 }
                }
            },
            {
                id: 27,
                left: "We zijn verleidelijk en aantrekkelijk",
                right: "We zijn nuchter en functioneel",
                archetypeMapping: {
                    1: { lover: 2, magician: 1 },
                    2: { lover: 1, creator: 1 },
                    3: {},
                    4: { regular: 1, sage: 1 },
                    5: { regular: 2, sage: 1 }
                }
            },
            {
                id: 28,
                left: "We willen anderen verrassen",
                right: "We willen anderen geruststellen",
                archetypeMapping: {
                    1: { magician: 2, jester: 1, outlaw: 1 },
                    2: { magician: 1, creator: 1 },
                    3: {},
                    4: { caregiver: 1, innocent: 1 },
                    5: { caregiver: 2, innocent: 2 }
                }
            },
            {
                id: 29,
                left: "We bouwen ons merk op intuïtie",
                right: "We bouwen ons merk op analyse",
                archetypeMapping: {
                    1: { creator: 2, magician: 1, lover: 1 },
                    2: { creator: 1, magician: 1 },
                    3: {},
                    4: { sage: 1, ruler: 1 },
                    5: { sage: 2, ruler: 2 }
                }
            },
            {
                id: 30,
                left: "We streven naar vrijheid van expressie",
                right: "We streven naar controle en orde",
                archetypeMapping: {
                    1: { creator: 2, outlaw: 1, explorer: 1 },
                    2: { creator: 1, outlaw: 1 },
                    3: {},
                    4: { ruler: 1, sage: 1 },
                    5: { ruler: 2, sage: 1 }
                }
            }
        ];

        function MerkarchetypeTest() {
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);
            const [results, setResults] = useState(null);

            const handleAnswer = (questionId, value) => {
                setAnswers(prev => ({
                    ...prev,
                    [questionId]: value
                }));
            };

            const calculateResults = () => {
                const scores = {
                    innocent: 0, explorer: 0, sage: 0, hero: 0,
                    outlaw: 0, magician: 0, regular: 0, lover: 0,
                    jester: 0, caregiver: 0, ruler: 0, creator: 0
                };

                questions.forEach(question => {
                    const answer = answers[question.id];
                    if (answer && question.archetypeMapping[answer]) {
                        const mapping = question.archetypeMapping[answer];
                        Object.keys(mapping).forEach(archetype => {
                            scores[archetype] += mapping[archetype];
                        });
                    }
                });

                // Sort all archetypes by score
                const sorted = Object.entries(scores)
                    .sort(([, a], [, b]) => b - a);

                // Get top 3
                const top3 = sorted.slice(0, 3);
                
                // Calculate percentages for top 3 only (they sum to 100%)
                const top3Total = top3.reduce((sum, [, score]) => sum + score, 0);
                const top3WithPercentages = top3.map(([key, score]) => [
                    key, 
                    Math.round((score / top3Total) * 100)
                ]);
                
                // Ensure percentages sum exactly to 100 (handle rounding)
                const percentageSum = top3WithPercentages.reduce((sum, [, perc]) => sum + perc, 0);
                if (percentageSum !== 100) {
                    top3WithPercentages[0][1] += (100 - percentageSum);
                }

                setResults({
                    primary: top3WithPercentages[0],
                    secondary: top3WithPercentages[1],
                    tertiary: top3WithPercentages[2],
                    rawScores: scores
                });
                setShowResults(true);
            };

            const generateProfile = () => {
                const [primaryKey] = results.primary;
                const [secondaryKey] = results.secondary;
                const [tertiaryKey] = results.tertiary;

                const answerPatterns = {
                    playful: answers[1] <= 2,
                    serious: answers[1] >= 4,
                    adventurous: answers[2] <= 2,
                    secure: answers[2] >= 4,
                    caring: answers[3] <= 2,
                    strong: answers[3] >= 4,
                    worldImproving: answers[4] <= 2,
                    lifeEasing: answers[4] >= 4,
                    authentic: answers[5] <= 2,
                    prestigious: answers[5] >= 4,
                    imaginative: answers[6] <= 2,
                    logical: answers[6] >= 4,
                    revolutionary: answers[7] <= 2,
                    stable: answers[7] >= 4,
                    warm: answers[8] <= 2,
                    professional: answers[8] >= 4,
                    communityFocused: answers[9] <= 2,
                    achievementFocused: answers[9] >= 4,
                    visionary: answers[22] <= 2,
                    practical: answers[22] >= 4,
                    emotional: answers[26] <= 2,
                    rational: answers[26] >= 4
                };

                let profile = "Jouw merk kenmerkt zich door ";

                if (answerPatterns.revolutionary) {
                    profile += "een gedreven focus op verandering en het doorbreken van conventies";
                } else if (answerPatterns.stable) {
                    profile += "een verankering in stabiliteit, continuïteit en betrouwbaarheid";
                } else {
                    profile += "een evenwichtige balans tussen stabiliteit en vernieuwing";
                }

                profile += ". ";

                if (answerPatterns.emotional) {
                    profile += "Emotionele resonantie en authentieke verbindingen vormen het hart van jullie merkbeleving";
                } else if (answerPatterns.rational) {
                    profile += "Ratio, logica en meetbare waarde zijn de fundamenten van jullie propositie";
                } else {
                    profile += "Jullie weten emotionele impact te combineren met rationele overtuigingskracht";
                }

                profile += ". ";

                if (answerPatterns.adventurous) {
                    profile += "Het merk inspireert tot vrijheid, ontdekking en het aangaan van nieuwe uitdagingen";
                } else if (answerPatterns.secure) {
                    profile += "Veiligheid, vertrouwen en zekerheid zijn kernwaarden in jullie merkbelofte";
                } else {
                    profile += "Het merk biedt een veilige basis voor groei en exploratie";
                }

                profile += ". ";

                if (answerPatterns.visionary) {
                    profile += "Met een visionair karakter en grote ambities tonen jullie mensen wat mogelijk is";
                } else if (answerPatterns.practical) {
                    profile += "Door praktisch en realistisch te blijven, leveren jullie tastbare waarde";
                } else {
                    profile += "Het merk verenigt aspiratie met realiteit en dromen met daden";
                }

                profile += ".";

                return profile;
            };

            const getArchetypeExplanation = () => {
                const [primaryKey, primaryPercent] = results.primary;
                const [secondaryKey, secondaryPercent] = results.secondary;
                const [tertiaryKey, tertiaryPercent] = results.tertiary;

                const primary = archetypes[primaryKey];
                const secondary = archetypes[secondaryKey];
                const tertiary = archetypes[tertiaryKey];

                return (
                    <div className="space-y-8">
                        <div className="border-l-4 pl-6" style={{ borderColor: primary.color }}>
                            <h3 className="text-2xl font-bold mb-3" style={{ color: primary.color }}>
                                Primair Archetype: {primary.name} ({primaryPercent}%)
                            </h3>
                            <p className="text-sm text-gray-500 italic mb-3">{primary.subtitle}</p>
                            <p className="text-gray-700 mb-3 leading-relaxed">{primary.description}</p>
                            <div className="bg-gray-50 p-4 rounded-lg mb-3">
                                <p className="text-gray-800 mb-2"><strong>Kernbelofte:</strong> "{primary.promise}"</p>
                                <p className="text-gray-700 mb-2"><strong>Kernwaarden:</strong> {primary.traits}</p>
                            </div>
                            <p className="text-gray-700 mb-3 leading-relaxed"><strong>Communicatie:</strong> {primary.communication}</p>
                            <p className="text-gray-600 text-sm"><strong>Voorbeeldmerken:</strong> {primary.brands}</p>
                        </div>

                        <div className="border-l-4 pl-6" style={{ borderColor: secondary.color }}>
                            <h3 className="text-xl font-bold mb-3" style={{ color: secondary.color }}>
                                Secundair Archetype: {secondary.name} ({secondaryPercent}%)
                            </h3>
                            <p className="text-sm text-gray-500 italic mb-3">{secondary.subtitle}</p>
                            <p className="text-gray-700 mb-3 leading-relaxed">{secondary.description}</p>
                            <div className="bg-gray-50 p-4 rounded-lg mb-3">
                                <p className="text-gray-800 mb-2"><strong>Kernbelofte:</strong> "{secondary.promise}"</p>
                                <p className="text-gray-700 mb-2"><strong>Kernwaarden:</strong> {secondary.traits}</p>
                            </div>
                            <p className="text-gray-700 mb-3 leading-relaxed"><strong>Communicatie:</strong> {secondary.communication}</p>
                            <p className="text-gray-600 text-sm"><strong>Voorbeeldmerken:</strong> {secondary.brands}</p>
                        </div>

                        <div className="border-l-4 pl-6" style={{ borderColor: tertiary.color }}>
                            <h3 className="text-lg font-bold mb-3" style={{ color: tertiary.color }}>
                                Tertiair Archetype: {tertiary.name} ({tertiaryPercent}%)
                            </h3>
                            <p className="text-sm text-gray-500 italic mb-3">{tertiary.subtitle}</p>
                            <p className="text-gray-700 mb-3 leading-relaxed">{tertiary.description}</p>
                            <div className="bg-gray-50 p-4 rounded-lg mb-3">
                                <p className="text-gray-800 mb-2"><strong>Kernbelofte:</strong> "{tertiary.promise}"</p>
                                <p className="text-gray-700 mb-2"><strong>Kernwaarden:</strong> {tertiary.traits}</p>
                            </div>
                            <p className="text-gray-700 mb-3 leading-relaxed"><strong>Communicatie:</strong> {tertiary.communication}</p>
                            <p className="text-gray-600 text-sm"><strong>Voorbeeldmerken:</strong> {tertiary.brands}</p>
                        </div>

                        <div className="bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-lg border-l-4 border-gray-400 mt-8">
                            <h4 className="font-bold text-gray-900 mb-3 text-lg">Geïntegreerde Merkidentiteit</h4>
                            <p className="text-gray-700 leading-relaxed">
                                Jouw merk combineert de kracht van <strong style={{ color: primary.color }}>{primary.name}</strong> als leidend archetype ({primaryPercent}%), 
                                versterkt door elementen van <strong style={{ color: secondary.color }}>{secondary.name}</strong> ({secondaryPercent}%) 
                                en <strong style={{ color: tertiary.color }}>{tertiary.name}</strong> ({tertiaryPercent}%). 
                                Deze combinatie creëert een unieke merkpersoonlijkheid die {primary.description.toLowerCase().split('.')[0]}, 
                                terwijl het ook {secondary.description.toLowerCase().split('.')[0]}. 
                                Dit maakt jullie merk onderscheidend en authentiek in jullie positionering.
                            </p>
                        </div>
                    </div>
                );
            };

            if (showResults && results) {
                return (
                    <div className="min-h-screen py-12 px-4">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-2xl shadow-2xl p-8 md:p-12">
                                <h1 className="text-4xl font-bold text-center mb-2 text-gray-800">
                                    Jouw Merkarchetype Profiel
                                </h1>
                                <p className="text-center text-gray-600 mb-8">
                                    Gebaseerd op de 12 Jungiaanse Merkarchetypen
                                </p>

                                <div className="mb-10">
                                    <h2 className="text-2xl font-bold mb-4 text-gray-800">Merkprofiel</h2>
                                    <div className="bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-lg border border-gray-200">
                                        <p className="text-gray-800 leading-relaxed text-lg">
                                            {generateProfile()}
                                        </p>
                                    </div>
                                </div>

                                <div className="mb-10">
                                    <h2 className="text-2xl font-bold mb-6 text-gray-800">Jouw Archetype Verdeling</h2>
                                    <div className="flex flex-col md:flex-row items-center gap-8">
                                        <div className="w-full md:w-1/2">
                                            <PieChart data={[
                                                { name: archetypes[results.primary[0]].name, value: results.primary[1], color: archetypes[results.primary[0]].color },
                                                { name: archetypes[results.secondary[0]].name, value: results.secondary[1], color: archetypes[results.secondary[0]].color },
                                                { name: archetypes[results.tertiary[0]].name, value: results.tertiary[1], color: archetypes[results.tertiary[0]].color }
                                            ]} />
                                        </div>
                                        <div className="w-full md:w-1/2 space-y-4">
                                            <div className="flex items-center gap-3">
                                                <div className="w-6 h-6 rounded-full" style={{ backgroundColor: archetypes[results.primary[0]].color }}></div>
                                                <div>
                                                    <span className="font-bold text-gray-900">{archetypes[results.primary[0]].name}</span>
                                                    <span className="text-gray-600 ml-2">{results.primary[1]}%</span>
                                                    <div className="text-sm text-gray-500 italic">{archetypes[results.primary[0]].subtitle}</div>
                                                </div>
                                            </div>
                                            <div className="flex items-center gap-3">
                                                <div className="w-6 h-6 rounded-full" style={{ backgroundColor: archetypes[results.secondary[0]].color }}></div>
                                                <div>
                                                    <span className="font-bold text-gray-900">{archetypes[results.secondary[0]].name}</span>
                                                    <span className="text-gray-600 ml-2">{results.secondary[1]}%</span>
                                                    <div className="text-sm text-gray-500 italic">{archetypes[results.secondary[0]].subtitle}</div>
                                                </div>
                                            </div>
                                            <div className="flex items-center gap-3">
                                                <div className="w-6 h-6 rounded-full" style={{ backgroundColor: archetypes[results.tertiary[0]].color }}></div>
                                                <div>
                                                    <span className="font-bold text-gray-900">{archetypes[results.tertiary[0]].name}</span>
                                                    <span className="text-gray-600 ml-2">{results.tertiary[1]}%</span>
                                                    <div className="text-sm text-gray-500 italic">{archetypes[results.tertiary[0]].subtitle}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold mb-6 text-gray-800">Jouw Archetypen in Detail</h2>
                                    {getArchetypeExplanation()}
                                </div>

                                <div className="text-center pt-6 border-t border-gray-200">
                                    <button
                                        onClick={() => {
                                            setShowResults(false);
                                            setCurrentQuestion(0);
                                            setAnswers({});
                                            setResults(null);
                                        }}
                                        className="bg-gray-700 hover:bg-gray-800 text-white font-semibold py-3 px-8 rounded-lg transition-colors"
                                    >
                                        Nieuwe Assessment
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            const progress = (Object.keys(answers).length / questions.length) * 100;
            const currentQ = questions[currentQuestion];
            const isAnswered = answers[currentQ.id] !== undefined;

            return (
                <div className="min-h-screen py-12 px-4">
                    <div className="max-w-3xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 md:p-12">
                            <h1 className="text-4xl font-bold text-center mb-2 text-gray-800">
                                Dizain Merkarchetype Test
                            </h1>
                            <p className="text-center text-gray-600 mb-8">
                                Ontdek welk archetype het beste bij jouw merk past
                            </p>

                            <div className="mb-8">
                                <div className="flex justify-between text-sm text-gray-600 mb-2">
                                    <span>Vraag {currentQuestion + 1} van {questions.length}</span>
                                    <span>{Math.round(progress)}% compleet</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-2">
                                    <div
                                        className="bg-gradient-to-r from-gray-600 to-gray-700 h-2 rounded-full transition-all duration-300"
                                        style={{ width: `${progress}%` }}
                                    ></div>
                                </div>
                            </div>

                            <div className="mb-8">
                                <div className="bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-lg mb-6">
                                    <p className="text-sm text-gray-600 mb-4 text-center">
                                        Geef aan in hoeverre de linker of rechter stelling het beste bij jouw merk past
                                    </p>
                                    <div className="grid grid-cols-5 gap-2 mb-4">
                                        {[1, 2, 3, 4, 5].map((value) => (
                                            <button
                                                key={value}
                                                onClick={() => handleAnswer(currentQ.id, value)}
                                                className={`py-3 px-2 rounded-lg font-medium transition-all ${
                                                    answers[currentQ.id] === value
                                                        ? 'bg-gray-700 text-white shadow-lg scale-105'
                                                        : 'bg-white hover:bg-gray-200 text-gray-700 border border-gray-300'
                                                }`}
                                            >
                                                {value}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-left text-gray-700 font-medium flex-1">
                                            {currentQ.left}
                                        </span>
                                        <span className="text-right text-gray-700 font-medium flex-1">
                                            {currentQ.right}
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div className="flex justify-between">
                                <button
                                    onClick={() => setCurrentQuestion(Math.max(0, currentQuestion - 1))}
                                    disabled={currentQuestion === 0}
                                    className="bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors"
                                >
                                    Vorige
                                </button>
                                
                                {currentQuestion < questions.length - 1 ? (
                                    <button
                                        onClick={() => setCurrentQuestion(currentQuestion + 1)}
                                        disabled={!isAnswered}
                                        className="bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                    >
                                        Volgende
                                    </button>
                                ) : (
                                    <button
                                        onClick={calculateResults}
                                        disabled={Object.keys(answers).length < questions.length}
                                        className="bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-8 rounded-lg transition-colors"
                                    >
                                        Bekijk Resultaten
                                    </button>
                                )}
                            </div>

                            {Object.keys(answers).length < questions.length && currentQuestion === questions.length - 1 && (
                                <p className="text-center text-gray-600 mt-4 text-sm">
                                    Beantwoord alle vragen om je resultaten te zien
                                </p>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<MerkarchetypeTest />, document.getElementById('root'));
    </script>
</body>
</html>